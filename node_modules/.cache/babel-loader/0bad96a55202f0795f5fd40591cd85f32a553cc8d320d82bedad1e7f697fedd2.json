{"ast":null,"code":"import _defineProperty from\"D:/Coding/React/taskmybusiness/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/Coding/React/taskmybusiness/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/Coding/React/taskmybusiness/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Coding/React/taskmybusiness/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Coding/React/taskmybusiness/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./sign-up.scss\";import{X}from\"../../assets/icons.jsx\";import{Fragment,useState,useEffect,useRef}from\"react\";import{createAuthUserWithEmailAndPassword,createUserDocumentFromAuth}from\"../../utils/firebase/firebase-utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var defaultFormFields={fullName:\"\",email:\"\",phone:\"\",password:\"\",confirmPassword:\"\"};function SignUp(){var _useState=useState(\"hide\"),_useState2=_slicedToArray(_useState,2),showHide=_useState2[0],setShowHide=_useState2[1];var _useState3=useState(\"Sign-up\"),_useState4=_slicedToArray(_useState3,1),signUp=_useState4[0];var _useState5=useState(defaultFormFields),_useState6=_slicedToArray(_useState5,2),formFields=_useState6[0],setFormFields=_useState6[1];var fullName=formFields.fullName,email=formFields.email,phone=formFields.phone,password=formFields.password,confirmPassword=formFields.confirmPassword;// form imputs reset ////////\nvar resetFormFields=function resetFormFields(){setFormFields(defaultFormFields);};//       Sign in         ////////\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$createAuthUser,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(password!==confirmPassword)){_context.next=4;break;}alert(\"incorect confirm password\");return _context.abrupt(\"return\");case 4:_context.prev=4;_context.next=7;return createAuthUserWithEmailAndPassword(email,password);case 7:_yield$createAuthUser=_context.sent;user=_yield$createAuthUser.user;_context.next=11;return createUserDocumentFromAuth(user,{fullName:fullName});case 11:resetFormFields();_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](4);if(_context.t0.code===\"auth/email-already-in-use\"){alert(\"email already exists\");}else{console.log(\"user creation gives an error\");}case 17:case\"end\":return _context.stop();}},_callee,null,[[4,14]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setFormFields(_objectSpread(_objectSpread({},formFields),{},_defineProperty({},name,value)));}////////////popup window////////////////////////////\nvar popupRef=useRef();useEffect(function(){var handler=function handler(e){// console.log(popupRef.current.contains(e.target));\nif(!popupRef.current.contains(e.target)){setShowHide(\"hide\");}};document.addEventListener(\"mousedown\",handler);return function(){document.removeEventListener(\"mousedown\",handler);};});function popup(){if(showHide===\"hide\"){setShowHide(\"show\");}else{setShowHide(\"hide\");}}////////////////////////////////////////////////////////\nreturn/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"log-button\",onClick:popup,children:signUp}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(showHide),children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup\",ref:popupRef,children:[/*#__PURE__*/_jsx(\"div\",{onClick:popup,children:/*#__PURE__*/_jsx(X,{})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"I don't have an account\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"Sign up with your email and password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBlock\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"First and Last name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,onChange:handleChange,name:\"fullName\",value:fullName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBlock\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",onChange:handleChange,name:\"email\",value:email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBlock\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:handleChange,name:\"phone\",value:phone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBlock\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:handleChange,name:\"password\",value:password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBlock\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:handleChange,name:\"confirmPassword\",value:confirmPassword})]}),/*#__PURE__*/_jsx(\"button\",{className:\"submitbutton\",type:\"submit\",onClick:popup,children:\"SUBMIT\"})]})]})})]});}export default SignUp;","map":{"version":3,"names":["X","Fragment","useState","useEffect","useRef","createAuthUserWithEmailAndPassword","createUserDocumentFromAuth","jsx","_jsx","jsxs","_jsxs","defaultFormFields","fullName","email","phone","password","confirmPassword","SignUp","_useState","_useState2","_slicedToArray","showHide","setShowHide","_useState3","_useState4","signUp","_useState5","_useState6","formFields","setFormFields","resetFormFields","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","_yield$createAuthUser","user","wrap","_callee$","_context","prev","next","preventDefault","alert","abrupt","sent","t0","code","console","log","stop","_x","apply","arguments","handleChange","_event$target","target","name","value","_objectSpread","_defineProperty","popupRef","handler","e","current","contains","document","addEventListener","removeEventListener","popup","children","className","onClick","concat","ref","onSubmit","type","required","onChange"],"sources":["D:/Coding/React/taskmybusiness/src/components/sign-up/sign-up.jsx"],"sourcesContent":["import \"./sign-up.scss\";\r\nimport { X } from \"../../assets/icons.jsx\";\r\nimport { Fragment, useState, useEffect, useRef } from \"react\";\r\nimport {\r\n  createAuthUserWithEmailAndPassword,\r\n  createUserDocumentFromAuth,\r\n} from \"../../utils/firebase/firebase-utils\";\r\n\r\nconst defaultFormFields = {\r\n  fullName: \"\",\r\n  email: \"\",\r\n  phone: \"\",\r\n  password: \"\",\r\n  confirmPassword: \"\",\r\n};\r\n\r\nfunction SignUp() {\r\n  const [showHide, setShowHide] = useState(\"hide\");\r\n  const [signUp] = useState(\"Sign-up\");\r\n  const [formFields, setFormFields] = useState(defaultFormFields);\r\n  const { fullName, email, phone, password, confirmPassword } = formFields;\r\n\r\n  // form imputs reset ////////\r\n  const resetFormFields = () => {\r\n    setFormFields(defaultFormFields);\r\n  };\r\n\r\n  //       Sign in         ////////\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (password !== confirmPassword) {\r\n      alert(\"incorect confirm password\");\r\n      return;\r\n    }\r\n    try {\r\n      const { user } = await createAuthUserWithEmailAndPassword(\r\n        email,\r\n        password\r\n      );\r\n      await createUserDocumentFromAuth(user, { fullName });\r\n      resetFormFields();\r\n    } catch (error) {\r\n      if (error.code === \"auth/email-already-in-use\") {\r\n        alert(\"email already exists\");\r\n      } else {\r\n        console.log(\"user creation gives an error\");\r\n      }\r\n    }\r\n  };\r\n\r\n  function handleChange(event) {\r\n    const { name, value } = event.target;\r\n    setFormFields({ ...formFields, [name]: value });\r\n  }\r\n\r\n  ////////////popup window////////////////////////////\r\n  let popupRef = useRef();\r\n  useEffect(() => {\r\n    let handler = (e) => {\r\n      // console.log(popupRef.current.contains(e.target));\r\n      if (!popupRef.current.contains(e.target)) {\r\n        setShowHide(\"hide\");\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handler);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handler);\r\n    };\r\n  });\r\n\r\n  function popup() {\r\n    if (showHide === \"hide\") {\r\n      setShowHide(\"show\");\r\n    } else {\r\n      setShowHide(\"hide\");\r\n    }\r\n  }\r\n  ////////////////////////////////////////////////////////\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className=\"log-button\" onClick={popup}>\r\n        {signUp}\r\n      </div>\r\n      <div className={`${showHide}`}>\r\n        <div className=\"popup\" ref={popupRef}>\r\n          <div onClick={popup}>\r\n            <X></X>\r\n          </div>\r\n          <form onSubmit={handleSubmit}>\r\n            <h1>I don't have an account</h1>\r\n            <h5>Sign up with your email and password</h5>\r\n            <div className=\"inputBlock\">\r\n              <label>First and Last name</label>\r\n              <input\r\n                type=\"text\"\r\n                required\r\n                onChange={handleChange}\r\n                name=\"fullName\"\r\n                value={fullName}\r\n              ></input>\r\n            </div>\r\n            <div className=\"inputBlock\">\r\n              <label>Email</label>\r\n              <input\r\n                type=\"email\"\r\n                onChange={handleChange}\r\n                name=\"email\"\r\n                value={email}\r\n              ></input>\r\n            </div>\r\n            <div className=\"inputBlock\">\r\n              <label>Phone</label>\r\n              <input\r\n                type=\"number\"\r\n                onChange={handleChange}\r\n                name=\"phone\"\r\n                value={phone}\r\n              ></input>\r\n            </div>\r\n            <div className=\"inputBlock\">\r\n              <label>Password</label>\r\n              <input\r\n                type=\"password\"\r\n                onChange={handleChange}\r\n                name=\"password\"\r\n                value={password}\r\n              ></input>\r\n            </div>\r\n            <div className=\"inputBlock\">\r\n              <label>Confirm Password</label>\r\n              <input\r\n                type=\"password\"\r\n                onChange={handleChange}\r\n                name=\"confirmPassword\"\r\n                value={confirmPassword}\r\n              ></input>\r\n            </div>\r\n            <button className=\"submitbutton\" type=\"submit\" onClick={popup}>\r\n              SUBMIT\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n}\r\nexport default SignUp;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}