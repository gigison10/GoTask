{"ast":null,"code":"const retrieveSigningKeys = require('../utils').retrieveSigningKeys;\n\n/**\n * Uses getKeysInterceptor to allow users to retrieve keys from a file,\n * external cache, or provided object before falling back to the jwksUri endpoint\n */\nfunction getKeysInterceptor(client, _ref) {\n  let {\n    getKeysInterceptor\n  } = _ref;\n  const getSigningKey = client.getSigningKey.bind(client);\n  return async kid => {\n    const keys = await getKeysInterceptor();\n    let signingKeys;\n    if (keys && keys.length) {\n      signingKeys = await retrieveSigningKeys(keys);\n    }\n    if (signingKeys && signingKeys.length) {\n      const key = signingKeys.find(k => !kid || k.kid === kid);\n      if (key) {\n        return key;\n      }\n    }\n    return getSigningKey(kid);\n  };\n}\nmodule.exports.default = getKeysInterceptor;","map":{"version":3,"names":["retrieveSigningKeys","require","getKeysInterceptor","client","_ref","getSigningKey","bind","kid","keys","signingKeys","length","key","find","k","module","exports","default"],"sources":["D:/Coding/React/taskmybusiness/node_modules/jwks-rsa/src/wrappers/interceptor.js"],"sourcesContent":["const retrieveSigningKeys = require('../utils').retrieveSigningKeys;\n\n/**\n * Uses getKeysInterceptor to allow users to retrieve keys from a file,\n * external cache, or provided object before falling back to the jwksUri endpoint\n */\nfunction getKeysInterceptor(client, { getKeysInterceptor }) {\n  const getSigningKey = client.getSigningKey.bind(client);\n\n  return async (kid) => {\n    const keys = await getKeysInterceptor();\n\n    let signingKeys;\n    if (keys && keys.length) {\n      signingKeys = await retrieveSigningKeys(keys);\n    }\n\n    if (signingKeys && signingKeys.length) {\n      const key = signingKeys.find(k => !kid || k.kid === kid);\n\n      if (key) {\n        return key;\n      }\n    }\n\n    return getSigningKey(kid);\n  };\n}\n\nmodule.exports.default = getKeysInterceptor;\n"],"mappings":"AAAA,MAAMA,mBAAmB,GAAGC,OAAO,CAAC,UAAU,CAAC,CAACD,mBAAmB;;AAEnE;AACA;AACA;AACA;AACA,SAASE,kBAAkBA,CAACC,MAAM,EAAAC,IAAA,EAA0B;EAAA,IAAxB;IAAEF;EAAmB,CAAC,GAAAE,IAAA;EACxD,MAAMC,aAAa,GAAGF,MAAM,CAACE,aAAa,CAACC,IAAI,CAACH,MAAM,CAAC;EAEvD,OAAO,MAAOI,GAAG,IAAK;IACpB,MAAMC,IAAI,GAAG,MAAMN,kBAAkB,CAAC,CAAC;IAEvC,IAAIO,WAAW;IACf,IAAID,IAAI,IAAIA,IAAI,CAACE,MAAM,EAAE;MACvBD,WAAW,GAAG,MAAMT,mBAAmB,CAACQ,IAAI,CAAC;IAC/C;IAEA,IAAIC,WAAW,IAAIA,WAAW,CAACC,MAAM,EAAE;MACrC,MAAMC,GAAG,GAAGF,WAAW,CAACG,IAAI,CAACC,CAAC,IAAI,CAACN,GAAG,IAAIM,CAAC,CAACN,GAAG,KAAKA,GAAG,CAAC;MAExD,IAAII,GAAG,EAAE;QACP,OAAOA,GAAG;MACZ;IACF;IAEA,OAAON,aAAa,CAACE,GAAG,CAAC;EAC3B,CAAC;AACH;AAEAO,MAAM,CAACC,OAAO,CAACC,OAAO,GAAGd,kBAAkB"},"metadata":{},"sourceType":"script","externalDependencies":[]}