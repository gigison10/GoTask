{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction once(emitter, name) {\n  let {\n    signal\n  } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new Promise((resolve, reject) => {\n    function cleanup() {\n      signal === null || signal === void 0 ? void 0 : signal.removeEventListener('abort', cleanup);\n      emitter.removeListener(name, onEvent);\n      emitter.removeListener('error', onError);\n    }\n    function onEvent() {\n      cleanup();\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      resolve(args);\n    }\n    function onError(err) {\n      cleanup();\n      reject(err);\n    }\n    signal === null || signal === void 0 ? void 0 : signal.addEventListener('abort', cleanup);\n    emitter.on(name, onEvent);\n    emitter.on('error', onError);\n  });\n}\nexports.default = once;","map":{"version":3,"names":["once","emitter","name","signal","arguments","length","undefined","Promise","resolve","reject","cleanup","removeEventListener","removeListener","onEvent","onError","_len","args","Array","_key","err","addEventListener","on","exports","default"],"sources":["../src/index.ts"],"sourcesContent":[null],"mappings":";;;;;AAOA,SAAwBA,IAAIA,CAI3BC,OAAgB,EAChBC,IAAW,EACiB;EAAA,IAA5B;IAAEC;EAAM,IAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAkB,EAAE;EAE5B,OAAO,IAAIG,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAI;IACtC,SAASC,OAAOA,CAAA;MACfP,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEQ,mBAAmB,CAAC,OAAO,EAAED,OAAO,CAAC;MAC7CT,OAAO,CAACW,cAAc,CAACV,IAAI,EAAEW,OAAO,CAAC;MACrCZ,OAAO,CAACW,cAAc,CAAC,OAAO,EAAEE,OAAO,CAAC;IACzC;IACA,SAASD,OAAOA,CAAA,EAAe;MAC9BH,OAAO,EAAE;MAAC,SAAAK,IAAA,GAAAX,SAAA,CAAAC,MAAA,EADSW,IAAW,OAAAC,KAAA,CAAAF,IAAA,GAAAG,IAAA,MAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA;QAAXF,IAAW,CAAAE,IAAA,IAAAd,SAAA,CAAAc,IAAA;MAAA;MAE9BV,OAAO,CAACQ,IAA+C,CAAC;IACzD;IACA,SAASF,OAAOA,CAACK,GAAU;MAC1BT,OAAO,EAAE;MACTD,MAAM,CAACU,GAAG,CAAC;IACZ;IACAhB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEiB,gBAAgB,CAAC,OAAO,EAAEV,OAAO,CAAC;IAC1CT,OAAO,CAACoB,EAAE,CAACnB,IAAI,EAAEW,OAAO,CAAC;IACzBZ,OAAO,CAACoB,EAAE,CAAC,OAAO,EAAEP,OAAO,CAAC;EAC7B,CAAC,CAAC;AACH;AA1BAQ,OAAA,CAAAC,OAAA,GAAAvB,IAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}