{"ast":null,"code":"/*! firebase-admin v11.9.0 */\n\"use strict\";\n\n/*!\n * @license\n * Copyright 2021 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AppCheck = void 0;\nconst validator = require(\"../utils/validator\");\nconst app_check_api_client_internal_1 = require(\"./app-check-api-client-internal\");\nconst token_generator_1 = require(\"./token-generator\");\nconst token_verifier_1 = require(\"./token-verifier\");\nconst crypto_signer_1 = require(\"../utils/crypto-signer\");\n/**\n * The Firebase `AppCheck` service interface.\n */\nclass AppCheck {\n  /**\n   * @param app - The app for this AppCheck service.\n   * @constructor\n   * @internal\n   */\n  constructor(app) {\n    this.app = app;\n    this.client = new app_check_api_client_internal_1.AppCheckApiClient(app);\n    try {\n      this.tokenGenerator = new token_generator_1.AppCheckTokenGenerator((0, crypto_signer_1.cryptoSignerFromApp)(app));\n    } catch (err) {\n      throw (0, token_generator_1.appCheckErrorFromCryptoSignerError)(err);\n    }\n    this.appCheckTokenVerifier = new token_verifier_1.AppCheckTokenVerifier(app);\n  }\n  /**\n   * Creates a new {@link AppCheckToken} that can be sent\n   * back to a client.\n   *\n   * @param appId - The app ID to use as the JWT app_id.\n   * @param options - Optional options object when creating a new App Check Token.\n   *\n   * @returns A promise that fulfills with a `AppCheckToken`.\n   */\n  createToken(appId, options) {\n    return this.tokenGenerator.createCustomToken(appId, options).then(customToken => {\n      return this.client.exchangeToken(customToken, appId);\n    });\n  }\n  /**\n   * Verifies a Firebase App Check token (JWT). If the token is valid, the promise is\n   * fulfilled with the token's decoded claims; otherwise, the promise is\n   * rejected.\n   *\n   * @param appCheckToken - The App Check token to verify.\n   * @param options - Optional {@link VerifyAppCheckTokenOptions} object when verifying an App Check Token.\n   *\n   * @returns A promise fulfilled with the token's decoded claims\n   *   if the App Check token is valid; otherwise, a rejected promise.\n   */\n  verifyToken(appCheckToken, options) {\n    this.validateVerifyAppCheckTokenOptions(options);\n    return this.appCheckTokenVerifier.verifyToken(appCheckToken).then(decodedToken => {\n      if (options?.consume) {\n        return this.client.verifyReplayProtection(appCheckToken).then(alreadyConsumed => {\n          return {\n            alreadyConsumed,\n            appId: decodedToken.app_id,\n            token: decodedToken\n          };\n        });\n      }\n      return {\n        appId: decodedToken.app_id,\n        token: decodedToken\n      };\n    });\n  }\n  validateVerifyAppCheckTokenOptions(options) {\n    if (typeof options === 'undefined') {\n      return;\n    }\n    if (!validator.isNonNullObject(options)) {\n      throw new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', 'VerifyAppCheckTokenOptions must be a non-null object.');\n    }\n  }\n}\nexports.AppCheck = AppCheck;","map":{"version":3,"names":["Object","defineProperty","exports","value","AppCheck","validator","require","app_check_api_client_internal_1","token_generator_1","token_verifier_1","crypto_signer_1","constructor","app","client","AppCheckApiClient","tokenGenerator","AppCheckTokenGenerator","cryptoSignerFromApp","err","appCheckErrorFromCryptoSignerError","appCheckTokenVerifier","AppCheckTokenVerifier","createToken","appId","options","createCustomToken","then","customToken","exchangeToken","verifyToken","appCheckToken","validateVerifyAppCheckTokenOptions","decodedToken","consume","verifyReplayProtection","alreadyConsumed","app_id","token","isNonNullObject","FirebaseAppCheckError"],"sources":["D:/Coding/React/taskmybusiness/node_modules/firebase-admin/lib/app-check/app-check.js"],"sourcesContent":["/*! firebase-admin v11.9.0 */\n\"use strict\";\n/*!\n * @license\n * Copyright 2021 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AppCheck = void 0;\nconst validator = require(\"../utils/validator\");\nconst app_check_api_client_internal_1 = require(\"./app-check-api-client-internal\");\nconst token_generator_1 = require(\"./token-generator\");\nconst token_verifier_1 = require(\"./token-verifier\");\nconst crypto_signer_1 = require(\"../utils/crypto-signer\");\n/**\n * The Firebase `AppCheck` service interface.\n */\nclass AppCheck {\n    /**\n     * @param app - The app for this AppCheck service.\n     * @constructor\n     * @internal\n     */\n    constructor(app) {\n        this.app = app;\n        this.client = new app_check_api_client_internal_1.AppCheckApiClient(app);\n        try {\n            this.tokenGenerator = new token_generator_1.AppCheckTokenGenerator((0, crypto_signer_1.cryptoSignerFromApp)(app));\n        }\n        catch (err) {\n            throw (0, token_generator_1.appCheckErrorFromCryptoSignerError)(err);\n        }\n        this.appCheckTokenVerifier = new token_verifier_1.AppCheckTokenVerifier(app);\n    }\n    /**\n     * Creates a new {@link AppCheckToken} that can be sent\n     * back to a client.\n     *\n     * @param appId - The app ID to use as the JWT app_id.\n     * @param options - Optional options object when creating a new App Check Token.\n     *\n     * @returns A promise that fulfills with a `AppCheckToken`.\n     */\n    createToken(appId, options) {\n        return this.tokenGenerator.createCustomToken(appId, options)\n            .then((customToken) => {\n            return this.client.exchangeToken(customToken, appId);\n        });\n    }\n    /**\n     * Verifies a Firebase App Check token (JWT). If the token is valid, the promise is\n     * fulfilled with the token's decoded claims; otherwise, the promise is\n     * rejected.\n     *\n     * @param appCheckToken - The App Check token to verify.\n     * @param options - Optional {@link VerifyAppCheckTokenOptions} object when verifying an App Check Token.\n     *\n     * @returns A promise fulfilled with the token's decoded claims\n     *   if the App Check token is valid; otherwise, a rejected promise.\n     */\n    verifyToken(appCheckToken, options) {\n        this.validateVerifyAppCheckTokenOptions(options);\n        return this.appCheckTokenVerifier.verifyToken(appCheckToken)\n            .then((decodedToken) => {\n            if (options?.consume) {\n                return this.client.verifyReplayProtection(appCheckToken)\n                    .then((alreadyConsumed) => {\n                    return {\n                        alreadyConsumed,\n                        appId: decodedToken.app_id,\n                        token: decodedToken,\n                    };\n                });\n            }\n            return {\n                appId: decodedToken.app_id,\n                token: decodedToken,\n            };\n        });\n    }\n    validateVerifyAppCheckTokenOptions(options) {\n        if (typeof options === 'undefined') {\n            return;\n        }\n        if (!validator.isNonNullObject(options)) {\n            throw new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', 'VerifyAppCheckTokenOptions must be a non-null object.');\n        }\n    }\n}\nexports.AppCheck = AppCheck;\n"],"mappings":"AAAA;AACA,YAAY;;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,QAAQ,GAAG,KAAK,CAAC;AACzB,MAAMC,SAAS,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAMC,+BAA+B,GAAGD,OAAO,CAAC,iCAAiC,CAAC;AAClF,MAAME,iBAAiB,GAAGF,OAAO,CAAC,mBAAmB,CAAC;AACtD,MAAMG,gBAAgB,GAAGH,OAAO,CAAC,kBAAkB,CAAC;AACpD,MAAMI,eAAe,GAAGJ,OAAO,CAAC,wBAAwB,CAAC;AACzD;AACA;AACA;AACA,MAAMF,QAAQ,CAAC;EACX;AACJ;AACA;AACA;AACA;EACIO,WAAWA,CAACC,GAAG,EAAE;IACb,IAAI,CAACA,GAAG,GAAGA,GAAG;IACd,IAAI,CAACC,MAAM,GAAG,IAAIN,+BAA+B,CAACO,iBAAiB,CAACF,GAAG,CAAC;IACxE,IAAI;MACA,IAAI,CAACG,cAAc,GAAG,IAAIP,iBAAiB,CAACQ,sBAAsB,CAAC,CAAC,CAAC,EAAEN,eAAe,CAACO,mBAAmB,EAAEL,GAAG,CAAC,CAAC;IACrH,CAAC,CACD,OAAOM,GAAG,EAAE;MACR,MAAM,CAAC,CAAC,EAAEV,iBAAiB,CAACW,kCAAkC,EAAED,GAAG,CAAC;IACxE;IACA,IAAI,CAACE,qBAAqB,GAAG,IAAIX,gBAAgB,CAACY,qBAAqB,CAACT,GAAG,CAAC;EAChF;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIU,WAAWA,CAACC,KAAK,EAAEC,OAAO,EAAE;IACxB,OAAO,IAAI,CAACT,cAAc,CAACU,iBAAiB,CAACF,KAAK,EAAEC,OAAO,CAAC,CACvDE,IAAI,CAAEC,WAAW,IAAK;MACvB,OAAO,IAAI,CAACd,MAAM,CAACe,aAAa,CAACD,WAAW,EAAEJ,KAAK,CAAC;IACxD,CAAC,CAAC;EACN;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIM,WAAWA,CAACC,aAAa,EAAEN,OAAO,EAAE;IAChC,IAAI,CAACO,kCAAkC,CAACP,OAAO,CAAC;IAChD,OAAO,IAAI,CAACJ,qBAAqB,CAACS,WAAW,CAACC,aAAa,CAAC,CACvDJ,IAAI,CAAEM,YAAY,IAAK;MACxB,IAAIR,OAAO,EAAES,OAAO,EAAE;QAClB,OAAO,IAAI,CAACpB,MAAM,CAACqB,sBAAsB,CAACJ,aAAa,CAAC,CACnDJ,IAAI,CAAES,eAAe,IAAK;UAC3B,OAAO;YACHA,eAAe;YACfZ,KAAK,EAAES,YAAY,CAACI,MAAM;YAC1BC,KAAK,EAAEL;UACX,CAAC;QACL,CAAC,CAAC;MACN;MACA,OAAO;QACHT,KAAK,EAAES,YAAY,CAACI,MAAM;QAC1BC,KAAK,EAAEL;MACX,CAAC;IACL,CAAC,CAAC;EACN;EACAD,kCAAkCA,CAACP,OAAO,EAAE;IACxC,IAAI,OAAOA,OAAO,KAAK,WAAW,EAAE;MAChC;IACJ;IACA,IAAI,CAACnB,SAAS,CAACiC,eAAe,CAACd,OAAO,CAAC,EAAE;MACrC,MAAM,IAAIjB,+BAA+B,CAACgC,qBAAqB,CAAC,kBAAkB,EAAE,uDAAuD,CAAC;IAChJ;EACJ;AACJ;AACArC,OAAO,CAACE,QAAQ,GAAGA,QAAQ"},"metadata":{},"sourceType":"script","externalDependencies":[]}