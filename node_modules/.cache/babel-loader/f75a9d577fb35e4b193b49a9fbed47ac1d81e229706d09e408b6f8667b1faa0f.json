{"ast":null,"code":"/*! firebase-admin v11.9.0 */\n\"use strict\";\n\n/*!\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getErrorCode = exports.createFirebaseError = void 0;\nconst error_1 = require(\"../utils/error\");\nconst validator = require(\"../utils/validator\");\n/**\n * Creates a new FirebaseMessagingError by extracting the error code, message and other relevant\n * details from an HTTP error response.\n *\n * @param err - The HttpError to convert into a Firebase error\n * @returns A Firebase error that can be returned to the user.\n */\nfunction createFirebaseError(err) {\n  if (err.response.isJson()) {\n    // For JSON responses, map the server response to a client-side error.\n    const json = err.response.data;\n    const errorCode = getErrorCode(json);\n    const errorMessage = getErrorMessage(json);\n    return error_1.FirebaseMessagingError.fromServerError(errorCode, errorMessage, json);\n  }\n  // Non-JSON response\n  let error;\n  switch (err.response.status) {\n    case 400:\n      error = error_1.MessagingClientErrorCode.INVALID_ARGUMENT;\n      break;\n    case 401:\n    case 403:\n      error = error_1.MessagingClientErrorCode.AUTHENTICATION_ERROR;\n      break;\n    case 500:\n      error = error_1.MessagingClientErrorCode.INTERNAL_ERROR;\n      break;\n    case 503:\n      error = error_1.MessagingClientErrorCode.SERVER_UNAVAILABLE;\n      break;\n    default:\n      // Treat non-JSON responses with unexpected status codes as unknown errors.\n      error = error_1.MessagingClientErrorCode.UNKNOWN_ERROR;\n  }\n  return new error_1.FirebaseMessagingError({\n    code: error.code,\n    message: `${error.message} Raw server response: \"${err.response.text}\". Status code: ` + `${err.response.status}.`\n  });\n}\nexports.createFirebaseError = createFirebaseError;\n/**\n * @param response - The response to check for errors.\n * @returns The error code if present; null otherwise.\n */\nfunction getErrorCode(response) {\n  if (validator.isNonNullObject(response) && 'error' in response) {\n    const error = response.error;\n    if (validator.isString(error)) {\n      return error;\n    }\n    if (validator.isArray(error.details)) {\n      const fcmErrorType = 'type.googleapis.com/google.firebase.fcm.v1.FcmError';\n      for (const element of error.details) {\n        if (element['@type'] === fcmErrorType) {\n          return element.errorCode;\n        }\n      }\n    }\n    if ('status' in error) {\n      return error.status;\n    } else {\n      return error.message;\n    }\n  }\n  return null;\n}\nexports.getErrorCode = getErrorCode;\n/**\n * Extracts error message from the given response object.\n *\n * @param response - The response to check for errors.\n * @returns The error message if present; null otherwise.\n */\nfunction getErrorMessage(response) {\n  if (validator.isNonNullObject(response) && 'error' in response && validator.isNonEmptyString(response.error.message)) {\n    return response.error.message;\n  }\n  return null;\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","getErrorCode","createFirebaseError","error_1","require","validator","err","response","isJson","json","data","errorCode","errorMessage","getErrorMessage","FirebaseMessagingError","fromServerError","error","status","MessagingClientErrorCode","INVALID_ARGUMENT","AUTHENTICATION_ERROR","INTERNAL_ERROR","SERVER_UNAVAILABLE","UNKNOWN_ERROR","code","message","text","isNonNullObject","isString","isArray","details","fcmErrorType","element","isNonEmptyString"],"sources":["D:/Coding/React/taskmybusiness/node_modules/firebase-admin/lib/messaging/messaging-errors-internal.js"],"sourcesContent":["/*! firebase-admin v11.9.0 */\n\"use strict\";\n/*!\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getErrorCode = exports.createFirebaseError = void 0;\nconst error_1 = require(\"../utils/error\");\nconst validator = require(\"../utils/validator\");\n/**\n * Creates a new FirebaseMessagingError by extracting the error code, message and other relevant\n * details from an HTTP error response.\n *\n * @param err - The HttpError to convert into a Firebase error\n * @returns A Firebase error that can be returned to the user.\n */\nfunction createFirebaseError(err) {\n    if (err.response.isJson()) {\n        // For JSON responses, map the server response to a client-side error.\n        const json = err.response.data;\n        const errorCode = getErrorCode(json);\n        const errorMessage = getErrorMessage(json);\n        return error_1.FirebaseMessagingError.fromServerError(errorCode, errorMessage, json);\n    }\n    // Non-JSON response\n    let error;\n    switch (err.response.status) {\n        case 400:\n            error = error_1.MessagingClientErrorCode.INVALID_ARGUMENT;\n            break;\n        case 401:\n        case 403:\n            error = error_1.MessagingClientErrorCode.AUTHENTICATION_ERROR;\n            break;\n        case 500:\n            error = error_1.MessagingClientErrorCode.INTERNAL_ERROR;\n            break;\n        case 503:\n            error = error_1.MessagingClientErrorCode.SERVER_UNAVAILABLE;\n            break;\n        default:\n            // Treat non-JSON responses with unexpected status codes as unknown errors.\n            error = error_1.MessagingClientErrorCode.UNKNOWN_ERROR;\n    }\n    return new error_1.FirebaseMessagingError({\n        code: error.code,\n        message: `${error.message} Raw server response: \"${err.response.text}\". Status code: ` +\n            `${err.response.status}.`,\n    });\n}\nexports.createFirebaseError = createFirebaseError;\n/**\n * @param response - The response to check for errors.\n * @returns The error code if present; null otherwise.\n */\nfunction getErrorCode(response) {\n    if (validator.isNonNullObject(response) && 'error' in response) {\n        const error = response.error;\n        if (validator.isString(error)) {\n            return error;\n        }\n        if (validator.isArray(error.details)) {\n            const fcmErrorType = 'type.googleapis.com/google.firebase.fcm.v1.FcmError';\n            for (const element of error.details) {\n                if (element['@type'] === fcmErrorType) {\n                    return element.errorCode;\n                }\n            }\n        }\n        if ('status' in error) {\n            return error.status;\n        }\n        else {\n            return error.message;\n        }\n    }\n    return null;\n}\nexports.getErrorCode = getErrorCode;\n/**\n * Extracts error message from the given response object.\n *\n * @param response - The response to check for errors.\n * @returns The error message if present; null otherwise.\n */\nfunction getErrorMessage(response) {\n    if (validator.isNonNullObject(response) &&\n        'error' in response &&\n        validator.isNonEmptyString(response.error.message)) {\n        return response.error.message;\n    }\n    return null;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}